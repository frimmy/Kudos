
{% extends "base.html" %}


{% block content %}

<div class="main-column">

	<div class="new-post">
		<a class="new-post-modal-btn">
			<div class="new-kudos-button">
				<div class="depth">
					Give Kudos
				</div>
			</div>
		</a>

		<div class="post-modal">
			<form class="new-post-form">
				{{ new_post_form.csrf_token }} 

				<div class="row">
					<div class="col-lg-6">
						<div class ="submit-kudos">
							<div class="tags">
								<input type="text" class="tag_input" value placeholder="tags"/>
							</div>
							<div class="input-group">
								<span class="form-control">{{ new_post_form.post_body (class="new-post-body") }}</span>
							</div>

							<div class="submit-post-error">
								Please include a message
							</div>

							<div>
								<input type="dropbox-chooser" id="chooser" name="selected-file" data-link-type="direct"/>
								<p id="chosen">Chosen file:
									<span id="filename"></span>
									(<a id="remove" href="#">remove</a>)
								</p>
							</div>
							<button class="post-button cancel-new-post" type="button">Cancel</button>

							<button class="post-button submit-new-post" type="button">Submit</button>

							{{ new_post_form.hidden_tag_ids (class="hidden_tag_ids", id="hidden_tag_ids") }}
							{{ new_post_form.hidden_tag_text (class="hidden_tag_text", id="hidden_tag_text") }}

						</div>
					</div>
				</div>
			</form>
		</div>
	</div>


	<div class="post-column">

		{% for post in posts %}
		  {% include 'post.html' with context %}
		{% endfor %}

	</div>
</div>

<script type="text/javascript">
	$(document).ready(function(){

		var tag_words = {{tag_words|safe}}; //safe: tell flask that this input is okay
		var tag_json = {{tag_json|safe}}; 
		var tag_ids = {{tag_ids|safe}};

		// this makes the tag input work for all tag autocompleters
		$('.tag_input').tagsInput({
			width: 'auto',
			height: '30px',
			autocomplete_list: tag_words,
			autocomplete_dict: tag_json, 
			tag_ids: tag_ids,
		});
	});
</script>
{% endblock %}



