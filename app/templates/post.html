

{% set post_object = post.get('post_object') %}
<!-- user post_object.author to get user info on that post -->

<div class="post" id="{{post_object.id}}">
  <div class="taggees">
    <div class="avatars">
    {% if post.get('tagged_users') %}
      {% for user_tag in post.get('tagged_users') %}
        <a class="avatar" href="{{ url_for('user', username=user_tag.username) }}">
      	<div class="cropper">
            <img src="{{user_tag.photo}}" alt="{{user_tag.username}}" />
    	  </div>
        </a>
      {% endfor %}
    {% endif %}
    </div>
  </div>

  <div class="white-card">


    <blockquote>
      {{post_object.body}}
    </blockquote>

    <div class="post-author">
      <a href="{{ url_for('user', username=post_object.author.username) }}" class="author-name">{{post_object.author.firstname}} {{post_object.author.lastname}}</a>,  
      <a href="{{ url_for('team', team='Hackbright')}}" class="team-name">Hackbright</a> 
    </div>
    <div class="post-metadata">
      {% set comments = post.get('children_objects')|length %}
      {% if comments == 1 %}
        <a href="#" class="comment-count">{{comments}} Comment</a>
      {% else %}
        <a href="#" class="comment-count">{{comments}} Comments</a>
      {% endif %}
    </div>
  </div>

  <div class="toolbar">
    <a class="toolbar-button addtag-button" id="addtag-button" href="#">Add Tag</a>
    <a class="toolbar-button comment-button" id="addcomment-button" href="javascript:show_comment_modal()">Comment</a>
    <a class="toolbar-button thank-button" href="#" name="send-thanks" id="{{post_object.id}}">Thank</a>
    <a class="toolbar-button removepost-button" href="{{ url_for('delete_post', postid=post_object.id) }}">Remove Kudos</a>
  </div>

<!-- new tag -->
  <div class="tag-modal" id="{{post_object.id}}" style="display: none;">
    <form action="/newtag" method="POST" class="new-tag-form" id="{{post_object.id}}">  
      <div class="tags" id="tagsinput_tagsinput" name="tags_div" style="width: 290px;">
        <input type="text" class="tag_input" id="tag_input" name="tag_input" value placeholder="tags" style="width: 290px; align: center; border: none;"/>
      </div>
      <button class="post_button" id="no_new_tag_btn" value="cancel" style="color: white; font-weight:700; background: rgb(241, 150, 150); width: 80px; height: 25px; margin-top: 14px;">Cancel</button>

      <button type="submit" class="submit-new-tag-btn" name="submit-new_tag_btn" id="{{post_object.id}}" value="submit" style="color: white; font-weight:700; background: rgb(241, 150, 150); width: 80px; height: 25px; margin-top: 14px;"> Submit </button>
      {{ reply_form.hidden_post_id(value=post_object.id) }}
      {{ new_post_form.hidden_tag_ids (class="hidden_tag_ids", id=post_object.id) }}
      {{ new_post_form.hidden_tag_text (class="hidden_tag_text", id=post_object.id) }}
    </form>
  </div>


<!-- new comment -->
  <div class="comment-modal" id="{{post_object.id}}" style="display: none;">
    <form action="/newreply" method="POST">
      {{new_post_form.csrf_token}}
      <div style="width: 200px">
        <div name="comment_body" id="comment_body">
          {{reply_form.reply_body (style="width: 284px; height: 70px; margin: 10px;")}}

          <button class="post_button" id="no_new_comment_btn" value="cancel" style="color: white; font-weight:700; background: rgb(241, 150, 150); width: 80px; height: 25px; margin-top: 14px;">Cancel</button>

          <button type="submit" class="post-button" name="new_reply_btn" value="submit" style="color: white; font-weight:700; background: rgb(241, 150, 150); width: 80px; height: 25px; margin: 14px;"> reply </button>
          
        </div>
      </div>
      <!-- Associate text box with specific post -->
      {{ reply_form.hidden_post_id(value=post_object.id) }}
    </form>
  </div>
</div>

<!-- Display comments on post -->
<div class="comments" id="{{post_object.id}}">

  {% for post_comment in post.get('children_objects') %}
    <div class="one-comment">
      <div id="{{post_comment.id}}" class="clearfix">

        <a class="avatar" href="{{ url_for('user', username=post_comment.author.username) }}">
          <div class="cropper">
              <img src="{{post_comment.author.photo}}" alt="{{post_comment.author.username}}" />
          </div>
        </a>
          <span class="comment-body">
          {{post_comment.body}}
        </span>
        <br>
        <a href="{{ url_for('user', username=post_comment.author.username) }}" class="comment-author">{{post_comment.author.firstname}} {{post_comment.author.lastname}}</a>
         
      </div>
    </div>
  {% endfor %}
</div>


<script type="text/javascript">




</script>
